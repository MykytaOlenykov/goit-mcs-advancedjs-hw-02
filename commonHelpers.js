var T=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var i=(t,e,s)=>(T(t,e,"read from private field"),s?s.call(t):e.get(t)),r=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},a=(t,e,s,n)=>(T(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s);import{n as C}from"./assets/common-d923f5c9.js";import{f as I}from"./assets/vendor-77e16229.js";class L{constructor(e){this.ref=document.querySelector(e)}}class M extends L{isDisabled(){return this.ref.hasAttribute("disabled")}disable(){this.ref.setAttribute("disabled","")}enable(){this.ref.removeAttribute("disabled")}}var l;class Z extends M{constructor(){super(...arguments);r(this,l,null)}onClick(s){i(this,l)&&this.ref.removeEventListener("click",i(this,l)),a(this,l,n=>{this.isDisabled()||s(n)}),this.ref.addEventListener("click",i(this,l))}}l=new WeakMap;class y extends L{update(e){this.ref.textContent=e}}var u,m,f,w;class x{constructor({daysViewElement:e=null,hoursViewElement:s=null,minutesViewElement:n=null,secondsViewElement:b=null}){r(this,u,null);r(this,m,null);r(this,f,null);r(this,w,null);a(this,u,e),a(this,m,s),a(this,f,n),a(this,w,b)}refresh(e){var p,E,v,V;const{days:s,hours:n,minutes:b,seconds:S}=this.convertMs(e);(p=i(this,u))==null||p.update(this.addLeadingZero(s)),(E=i(this,m))==null||E.update(this.addLeadingZero(n)),(v=i(this,f))==null||v.update(this.addLeadingZero(b)),(V=i(this,w))==null||V.update(this.addLeadingZero(S))}convertMs(e){const p=Math.floor(e/864e5),E=Math.floor(e%864e5/36e5),v=Math.floor(e%864e5%36e5/6e4),V=Math.floor(e%864e5%36e5%6e4/1e3);return{days:p,hours:E,minutes:v,seconds:V}}addLeadingZero(e){return String(e).padStart(2,"0")}}u=new WeakMap,m=new WeakMap,f=new WeakMap,w=new WeakMap;var o,d,D,c;class A{constructor(e){r(this,o,new Date);r(this,d,null);r(this,D,null);r(this,c,void 0);a(this,c,e)}get selectedDatetime(){return i(this,o)}set selectedDatetime(e){if(!this.validateDatetime(e))throw new Error("Invalid selectedDatetime");if(i(this,d)===null)a(this,o,e);else{const n="Timer started.";throw C.error(n),new Error(n)}}onStop(e){a(this,D,e)}start(){if(!this.validateDatetime(i(this,o)))return!1;const e=this.calculateDeltaDatetime();return i(this,c).refresh(e),a(this,d,setInterval(()=>{const s=this.calculateDeltaDatetime();if(i(this,c).refresh(s),s<=0){this.stop(),C.success("The timer has finished its work.");return}},1e3)),!0}stop(){var e;clearInterval(i(this,d)),a(this,d,null),i(this,c).refresh(0),(e=i(this,D))==null||e.call(this)}validateDatetime(e){const s=e>new Date;return s||C.error("Please choose a date in the future"),s}calculateDeltaDatetime(){const e=i(this,o)-new Date;return e<0?0:e}}o=new WeakMap,d=new WeakMap,D=new WeakMap,c=new WeakMap;const g=new M("input#datetime-picker"),h=new Z("button[data-start]"),P=new x({daysViewElement:new y("[data-days]"),hoursViewElement:new y("[data-hours]"),minutesViewElement:new y("[data-minutes]"),secondsViewElement:new y("[data-seconds]")}),k=new A(P);h.disable();h.onClick(_);k.onStop(j);const q={enableTime:!0,time_24hr:!0,defaultDate:k.selectedDatetime,minuteIncrement:1,onClose(t){B(t[0])}};I(g.ref,q);function B(t){try{k.selectedDatetime=t,h.enable()}catch{h.disable()}}function _(){h.disable(),k.start()&&g.disable()}function j(){g.enable()}
//# sourceMappingURL=commonHelpers.js.map
