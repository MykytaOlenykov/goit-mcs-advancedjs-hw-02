var T=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var i=(t,e,s)=>(T(t,e,"read from private field"),s?s.call(t):e.get(t)),r=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},a=(t,e,s,n)=>(T(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s);import"./assets/common-4d420f84.js";import{f as I,i as k}from"./assets/vendor-77e16229.js";class L{constructor(e){this.ref=document.querySelector(e)}}class M extends L{isDisabled(){return this.ref.hasAttribute("disabled")}disable(){this.ref.setAttribute("disabled","")}enable(){this.ref.removeAttribute("disabled")}}var l;class Z extends M{constructor(){super(...arguments);r(this,l,null)}onClick(s){i(this,l)&&this.ref.removeEventListener("click",i(this,l)),a(this,l,n=>{this.isDisabled()||s(n)}),this.ref.addEventListener("click",i(this,l))}}l=new WeakMap;class V extends L{update(e){this.ref.textContent=e}}var u,m,f,w;class x{constructor({daysViewElement:e=null,hoursViewElement:s=null,minutesViewElement:n=null,secondsViewElement:p=null}){r(this,u,null);r(this,m,null);r(this,f,null);r(this,w,null);a(this,u,e),a(this,m,s),a(this,f,n),a(this,w,p)}refresh(e){var b,E,g,v;const{days:s,hours:n,minutes:p,seconds:S}=this.convertMs(e);(b=i(this,u))==null||b.update(this.addLeadingZero(s)),(E=i(this,m))==null||E.update(this.addLeadingZero(n)),(g=i(this,f))==null||g.update(this.addLeadingZero(p)),(v=i(this,w))==null||v.update(this.addLeadingZero(S))}convertMs(e){const b=Math.floor(e/864e5),E=Math.floor(e%864e5/36e5),g=Math.floor(e%864e5%36e5/6e4),v=Math.floor(e%864e5%36e5%6e4/1e3);return{days:b,hours:E,minutes:g,seconds:v}}addLeadingZero(e){return String(e).padStart(2,"0")}}u=new WeakMap,m=new WeakMap,f=new WeakMap,w=new WeakMap;var o,d,D,c;class A{constructor(e){r(this,o,new Date);r(this,d,null);r(this,D,null);r(this,c,void 0);a(this,c,e)}get selectedDatetime(){return i(this,o)}set selectedDatetime(e){if(!this.validateDatetime(e))throw new Error("Invalid selectedDatetime");if(i(this,d)===null)a(this,o,e);else{const n="Timer started.";throw k.error({position:"topRight",message:n}),new Error(n)}}onStop(e){a(this,D,e)}start(){if(!this.validateDatetime(i(this,o)))return!1;const e=this.calculateDeltaDatetime();return i(this,c).refresh(e),a(this,d,setInterval(()=>{const s=this.calculateDeltaDatetime();if(i(this,c).refresh(s),s<=0){this.stop(),k.success({position:"topRight",message:"The timer has finished its work."});return}},1e3)),!0}stop(){var e;clearInterval(i(this,d)),a(this,d,null),i(this,c).refresh(0),(e=i(this,D))==null||e.call(this)}validateDatetime(e){const s=e>new Date;return s||k.error({position:"topRight",message:"Please choose a date in the future"}),s}calculateDeltaDatetime(){const e=i(this,o)-new Date;return e<0?0:e}}o=new WeakMap,d=new WeakMap,D=new WeakMap,c=new WeakMap;const C=new M("input#datetime-picker"),h=new Z("button[data-start]"),R=new x({daysViewElement:new V("[data-days]"),hoursViewElement:new V("[data-hours]"),minutesViewElement:new V("[data-minutes]"),secondsViewElement:new V("[data-seconds]")}),y=new A(R);h.disable();h.onClick(z);y.onStop(B);const P={enableTime:!0,time_24hr:!0,defaultDate:y.selectedDatetime,minuteIncrement:1,onClose(t){q(t[0])}};I(C.ref,P);function q(t){try{y.selectedDatetime=t,h.enable()}catch{h.disable()}}function z(){h.disable(),y.start()&&C.disable()}function B(){C.enable()}
//# sourceMappingURL=commonHelpers.js.map
