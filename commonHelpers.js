var L=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var r=(i,e,t)=>(L(i,e,"read from private field"),t?t.call(i):e.get(i)),o=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},l=(i,e,t,a)=>(L(i,e,"write to private field"),a?a.call(i,t):e.set(i,t),t);import{f as I,t as C}from"./assets/vendor-354fa557.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();class M{constructor(e){this.ref=document.querySelector(e)}}class k extends M{isDisabled(){return this.ref.hasAttribute("disabled")}disable(){this.ref.setAttribute("disabled","")}enable(){this.ref.removeAttribute("disabled")}}var u;class O extends k{constructor(){super(...arguments);o(this,u,null)}onClick(t){r(this,u)&&this.ref.removeEventListener("click",r(this,u)),l(this,u,a=>{this.isDisabled()||t(a)}),this.ref.addEventListener("click",r(this,u))}}u=new WeakMap;class T extends M{update(e){this.ref.textContent=e}}var p,w,D,b;class P{constructor({daysViewElement:e=null,hoursViewElement:t=null,minutesViewElement:a=null,secondsViewElement:s=null}){o(this,p,null);o(this,w,null);o(this,D,null);o(this,b,null);l(this,p,e),l(this,w,t),l(this,D,a),l(this,b,s)}refresh(e){var c,y,E,v;const{days:t,hours:a,minutes:s,seconds:n}=this.convertMs(e);(c=r(this,p))==null||c.update(this.normalizeViewTimeValue(t)),(y=r(this,w))==null||y.update(this.normalizeViewTimeValue(a)),(E=r(this,D))==null||E.update(this.normalizeViewTimeValue(s)),(v=r(this,b))==null||v.update(this.normalizeViewTimeValue(n))}convertMs(e){const c=Math.floor(e/864e5),y=Math.floor(e%864e5/36e5),E=Math.floor(e%864e5%36e5/6e4),v=Math.floor(e%864e5%36e5%6e4/1e3);return{days:c,hours:y,minutes:E,seconds:v}}normalizeViewTimeValue(e){return String(e).padStart(2,"0")}}p=new WeakMap,w=new WeakMap,D=new WeakMap,b=new WeakMap;var d,h,V,m;class z{constructor(e){o(this,d,new Date);o(this,h,null);o(this,V,null);o(this,m,void 0);l(this,m,e)}get selectedDatetime(){return r(this,d)}set selectedDatetime(e){if(!this.validateDatetime(e))throw new Error("Invalid selectedDatetime");r(this,h)===null?l(this,d,e):C.error("Timer started.")}onStop(e){l(this,V,e)}start(){if(!this.validateDatetime(r(this,d)))return!1;const e=this.calculateDeltaDatetime();return r(this,m).refresh(e),l(this,h,setInterval(()=>{const t=this.calculateDeltaDatetime();if(r(this,m).refresh(t),t<=0){this.stop(),C.success("The timer has finished its work.");return}},1e3)),!0}stop(){var e;clearInterval(r(this,h)),l(this,h,null),r(this,m).refresh(0),(e=r(this,V))==null||e.call(this)}validateDatetime(e){const t=e>new Date;return t||C.error("Please choose a date in the future"),t}calculateDeltaDatetime(){const e=r(this,d)-new Date;return e<0?0:e}}d=new WeakMap,h=new WeakMap,V=new WeakMap,m=new WeakMap;const S=new k("input#datetime-picker"),f=new O("button[data-start]"),x=new P({daysViewElement:new T("[data-days]"),hoursViewElement:new T("[data-hours]"),minutesViewElement:new T("[data-minutes]"),secondsViewElement:new T("[data-seconds]")}),g=new z(x);f.disable();f.onClick(q);g.onStop(B);const A={enableTime:!0,time_24hr:!0,defaultDate:g.selectedDatetime,minuteIncrement:1,onClose(i){N(i[0])}};I(S.ref,A);function N(i){try{g.selectedDatetime=i,f.enable()}catch{f.disable()}}function q(){f.disable(),g.start()&&S.disable()}function B(){S.enable()}
//# sourceMappingURL=commonHelpers.js.map
